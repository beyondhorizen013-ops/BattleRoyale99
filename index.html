<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Battle Royale 99 - Hardcore V2</title>
    <style>
        body { margin: 0; background: #111; color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        canvas { display: none; background: #2e7d32; cursor: crosshair; }
        #menu { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; background: #000; z-index: 100; }
        .box { padding: 40px; border: 4px solid #00ccff; border-radius: 20px; text-align: center; background: rgba(0,0,0,0.9); }
        .btn-play { padding: 15px 60px; font-size: 25px; font-weight: bold; background: #00ccff; border: none; border-radius: 50px; color: white; cursor: pointer; transition: 0.3s; }
        .btn-play:hover { transform: scale(1.1); box-shadow: 0 0 20px #00ccff; }
        #ui { position: absolute; top: 10px; left: 10px; display: none; pointer-events: none; z-index: 10; text-shadow: 2px 2px #000; }
        #kill-feed { position: absolute; top: 10px; right: 10px; width: 250px; text-align: right; color: #ff4444; font-weight: bold; z-index: 10; }
        #game-over { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 200; }
    </style>
</head>
<body>

    <div id="menu">
        <div class="box">
            <h1 style="font-size: 50px; color: #00ccff; margin: 10px;">BATTLE ROYALE 99</h1>
            <p style="color: #aaa; margin-bottom: 25px;">HARDCORE ALPHA V2</p>
            <button class="btn-play" id="playBtn">START MATCH</button>
        </div>
    </div>

    <div id="ui">
        <div id="timer" style="color: #0f0; font-weight: bold; font-size: 22px;">ZONE SHRINKING</div>
        <h2 id="alive">Players: 100</h2>
        <h3 id="hp" style="color: #ff4444;">HP: 100</h3>
        <div id="wep" style="color: #00ccff;">Weapon: Pistol</div>
    </div>

    <div id="kill-feed"></div>

    <div id="game-over">
        <h1 id="end-msg" style="color: red; font-size: 70px;">ELIMINATED</h1>
        <button class="btn-play" onclick="location.reload()">MAIN MENU</button>
    </div>

    <canvas id="game"></canvas>

<script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    
    let gameActive = false, aliveCount = 100, zoneRadius = 4500;
    let player = { id: 'player', name: 'You', x: 2500, y: 2500, hp: 100, weapon: 'Pistol', lastShot: 0 };
    let bots = [], bullets = [], chests = [], snacks = [], structures = [], keys = {};

    const botNames = ["Ninja", "Buiga", "BeyondFan", "CheesePro", "SweatyWrap", "Defaulty", "Tfue-ish", "SniperKing", "ZoneRunner", "BushCamper"];

    // World Gen
    for(let i=0; i<70; i++) structures.push({ x: Math.random()*4800, y: Math.random()*4800, w: 150, h: 150 });
    for(let i=0; i<99; i++) {
        bots.push({ 
            id: i, 
            name: botNames[Math.floor(Math.random()*botNames.length)] + " " + (i+1),
            x: Math.random()*5000, y: Math.random()*5000, 
            hp: 150, alive: true, vx: (Math.random()-0.5)*3, vy: (Math.random()-0.5)*3, lastShot: 0 
        });
    }
    for(let i=0; i<50; i++) chests.push({ x: Math.random()*5000, y: Math.random()*5000, open: false });
    for(let i=0; i<40; i++) snacks.push({ x: Math.random()*5000, y: Math.random()*5000, active: true });

    function addKill(msg) {
        const feed = document.getElementById('kill-feed');
        const entry = document.createElement('div');
        entry.innerText = msg;
        feed.prepend(entry);
        setTimeout(() => entry.remove(), 4000);
    }

    document.getElementById('playBtn').onclick = () => {
        document.getElementById('menu').style.display = 'none';
        document.getElementById('ui').style.display = 'block';
        canvas.style.display = 'block';
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        gameActive = true;
        requestAnimationFrame(loop);
    };

    function shoot(u, tx, ty, isPlayer) {
        const rate = isPlayer ? 400 : 800; // Player shoots faster
        if(Date.now() - u.lastShot < rate) return;
        let ang = Math.atan2(ty - u.y, tx - u.x);
        bullets.push({ x: u.x, y: u.y, vx: Math.cos(ang)*14, vy: Math.sin(ang)*14, ownerId: u.id, isPlayer: isPlayer });
        u.lastShot = Date.now();
    }

    function loop() {
        if(!gameActive) return;

        // Player Movement
        let oldX = player.x, oldY = player.y;
        if(keys['w']) player.y -= 5; if(keys['s']) player.y += 5;
        if(keys['a']) player.x -= 5; if(keys['d']) player.x += 5;
        structures.forEach(s => { if(player.x+15 > s.x && player.x-15 < s.x+s.w && player.y+15 > s.y && player.y-15 < s.y+s.h) { player.x = oldX; player.y = oldY; } });

        // Circle Shrinking (Slower for longer games)
        zoneRadius -= 0.08;
        if(Math.hypot(player.x-2500, player.y-2500) > zoneRadius) player.hp -= 0.3;

        // Smart Bot AI
        bots.forEach(b => {
            if(!b.alive) return;
            b.x += b.vx; b.y += b.vy;
            
            // Stay in Zone Logic
            if(Math.hypot(b.x-2500, b.y-2500) > zoneRadius) {
                let ang = Math.atan2(2500 - b.y, 2500 - b.x);
                b.vx = Math.cos(ang) * 3; b.vy = Math.sin(ang) * 3;
            }
            if(b.x<0||b.x>5000) b.vx*=-1; if(b.y<0||b.y>5000) b.vy*=-1;

            let dToP = Math.hypot(b.x-player.x, b.y-player.y);
            if(dToP < 400) shoot(b, player.x, player.y, false);
            else {
                let target = bots.find(o => o.alive && o.id !== b.id && Math.hypot(b.x-o.x, b.y-o.y) < 300);
                if(target) shoot(b, target.x, target.y, false);
            }
        });

        // Bullets
        for(let i=bullets.length-1; i>=0; i--) {
            let blt = bullets[i];
            blt.x += blt.vx; blt.y += blt.vy;
            if(blt.isPlayer) {
                bots.forEach(bot => { if(bot.alive && Math.hypot(blt.x-bot.x, blt.y-bot.y)<25) { bot.hp -= 50; if(bot.hp <= 0){bot.alive=false; aliveCount--; addKill("YOU ELIMINATED " + bot.name);} bullets.splice(i,1); } });
            } else {
                if(Math.hypot(blt.x-player.x, blt.y-player.y)<20) { player.hp -= 15; bullets.splice(i,1); }
                bots.forEach(bot => { if(bot.alive && bot.id !== blt.ownerId && Math.hypot(blt.x-bot.x, blt.y-bot.y)<25) { bot.hp -= 50; if(bot.hp <= 0){bot.alive=false; aliveCount--; addKill(bot.name + " WAS ELIMINATED");} bullets.splice(i,1); } });
            }
        }

        // Draw World
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.save(); ctx.translate(canvas.width/2-player.x, canvas.height/2-player.y);
        ctx.strokeStyle="rgba(255,255,255,0.2)"; ctx.strokeRect(0,0,5000,5000);
        ctx.strokeStyle="red"; ctx.lineWidth=10; ctx.beginPath(); ctx.arc(2500, 2500, zoneRadius, 0, Math.PI*2); ctx.stroke();
        ctx.fillStyle="#333"; structures.forEach(s => ctx.fillRect(s.x, s.y, s.w, s.h));
        ctx.fillStyle="gold"; chests.forEach(c => { if(!c.open) ctx.fillRect(c.x, c.y, 30, 20); if(!c.open && Math.hypot(player.x-c.x, player.y-c.y)<40){c.open=true; player.weapon='Sniper'; document.getElementById('wep').innerText='Weapon: Sniper'; addKill("LOOTED SNIPER");}});
        ctx.fillStyle="#0f0"; snacks.forEach(s => { if(s.active) ctx.fillRect(s.x, s.y, 15, 15); if(s.active && Math.hypot(player.x-s.x, player.y-s.y)<30){s.active=false; player.hp=Math.min(100, player.hp+30);}});
        ctx.fillStyle="red"; bots.forEach(b => { if(b.alive) ctx.fillRect(b.x-10, b.y-10, 20, 20); });
        ctx.fillStyle="yellow"; bullets.forEach(b => ctx.fillRect(b.x, b.y, 5, 5));
        ctx.restore();

        // Draw Player Center
        ctx.fillStyle="#00ccff"; ctx.fillRect(canvas.width/2-10, canvas.height/2-10, 20, 20);
        
        document.getElementById('hp').innerText = "HP: " + Math.max(0, Math.ceil(player.hp));
        document.getElementById('alive').innerText = "Players: " + aliveCount;

        if(player.hp <= 0) { gameActive=false; document.getElementById('game-over').style.display='flex'; }
        else if(aliveCount <= 1) { gameActive=false; document.getElementById('game-over').style.display='flex'; document.getElementById('end-msg').innerText="VICTORY ROYALE!"; document.getElementById('end-msg').style.color="#00ccff"; }
        else requestAnimationFrame(loop);
    }

    window.onkeydown=(e)=>keys[e.key.toLowerCase()]=true;
    window.onkeyup=(e)=>keys[e.key.toLowerCase()]=false;
    window.onmousedown=(e)=>shoot(player, e.clientX-canvas.width/2+player.x, e.clientY-canvas.height/2+player.y, true);
</script>
</body>
</html>
